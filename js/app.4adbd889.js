(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],h=0,d=[];h<s.length;h++)o=s[h],a[o]&&d.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==a[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},a={app:0},r=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("64a9"),a=i.n(n);a.a},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("RoadTraffic",{attrs:{title:"Traffic Density in SW England"}})],1)},r=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"visualisations"},[i("h2",[t._v(t._s(t.title))]),i("p",[t._v("\n    A visualisation of the traffic density accross different roads in south-westerly England.\n  ")]),i("p",[t._v("\n    The dot map distribution shows the relative difference in Annual Average Daily Flow by vehicle type. Switching tabs allows for different vehicle type densities to be examined. Hovering over a road's count point then shows the proportion of each vehicle type that uses the road.\n  ")]),i("div",{staticClass:"viz"}),i("div",{staticClass:"pie"}),i("p")])},s=[],l=(i("6762"),i("2fdb"),i("7f7f"),i("ac6a"),i("456d"),i("d225")),c=i("b0b4"),u=i("5698"),h=function(){function t(e){Object(l["a"])(this,t),this.element=e.root,this.root=e.root,this.data=e.data,this.margin={top:5,right:5,bottom:5,left:5},this.width=120,this.height=120,this.init()}return Object(c["a"])(t,[{key:"init",value:function(){var t=this.width-this.margin.left-this.margin.right,e=this.height-this.margin.top-this.margin.bottom;this.rad=Math.min(t,e)/2,console.log(u["l"]("#tooltip")),this.svg=u["l"]("#tooltip").append("svg").classed("pie",!0).attr("width",this.width).attr("height",this.height).append("g").attr("transform","translate(".concat(t/2+this.margin.left,",").concat(e/2+this.margin.top,")"))}},{key:"getPieColourScale",value:function(){return u["i"]().domain(Object.keys(this.data)).range(u["k"])}},{key:"draw",value:function(t){var e=this;this.data=t,this.colourScale=this.getPieColourScale(),this.pie=u["g"]().value(function(t){return t.value});var i=this.pie(u["c"](this.data)),n=this.svg.selectAll(".arc").data(i,function(t){return t});u["m"](".piearc").remove(),n.enter().append("path").attr("d",u["a"]().innerRadius(.5*this.rad).outerRadius(this.rad)).attr("fill",function(t){return e.colourScale(t.data.key)}).attr("stroke","white").style("stroke-width","1px").style("opacity",.8).attr("class","piearc")}}]),t}(),d=function(){function t(e){Object(l["a"])(this,t),this.element=e.root,this.root=e.root,this.data=e.data,this.margin={top:10,right:10,bottom:10,left:10},this.width=720,this.height=480,this.circleRad=3}return Object(c["a"])(t,[{key:"draw",value:function(){var t=this,e=this.width-this.margin.right-this.margin.left,i=this.height-this.margin.top-this.margin.bottom;this.createButtons(),this.svg=this.root.append("div").classed("svg-container",!0).append("svg").attr("width",this.width).attr("height",this.height).classed("svg-content",!0).append("g").attr("transform","translate(".concat(this.margin.left,",").concat(this.margin.top,")"));var n=u["h"]().domain([u["f"](this.data,function(t){return+t.easting}),u["e"](this.data,function(t){return+t.easting})]).range([0,e]).nice(),a=u["h"]().domain([u["f"](this.data,function(t){return+t.northing}),u["e"](this.data,function(t){return+t.northing})]).range([i,0]).nice();this.setColourScale("all_motor_vehicles"),this.circles=this.svg.selectAll("g").data(this.data).enter().append("g").append("circle").attr("cx",function(t){return n(t.easting)}).attr("cy",function(t){return a(t.northing)}).attr("r",this.circleRad).attr("fill",function(e){return t.colourScale(e.all_motor_vehicles)}).on("mouseover",this.onMouseOver.bind(this)).on("mouseout",this.onMouseOut.bind(this)),this.tooltip=u["l"](".viz").append("div").attr("id","tooltip").style("opacity",0).attr("class","tooltip"),this.tooltipText=this.tooltip.append("p").classed("tooltip-text",!0),this.dots=new h({root:u["l"]("#tooltip"),data:this.getTabNames(!1)}),this.updateTabColours(this.dots.getPieColourScale())}},{key:"getTabNames",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e={Bicycles:"pedal_cycles",Motorcycles:"two_wheeled_motor_vehicles","Cars & Taxis":"cars_and_taxis","Buses & Taxis":"buses_and_coaches",Trucks:"lgvs"};return t?Object.assign({"All Traffic":"all_motor_vehicles"},e):e}},{key:"createButtons",value:function(){this.tabNames=this.getTabNames(),this.buttons=this.element.append("div").classed("button-tabs",!0).selectAll("button").data(Object.keys(this.tabNames)).enter().append("button").classed("button-tab",!0).classed("active",function(t){return"All Traffic"===t}).text(function(t){return t}).on("click",this.tabPressed.bind(this))}},{key:"updateTabColours",value:function(t){this.buttons.style("color",function(e){return t(e)}).style("border-left",function(e){return"5px solid ".concat(t(e))})}},{key:"onMouseOver",value:function(t,e,i){var n="",a=u["l"](i[e]).each(function(t){return n=t["road_name"]});u["m"](i).filter(function(t){return t["road_name"]===n}).style("stroke","red").style("stroke-width",2).style("r",this.circleRad+2),a.style("stroke","black").style("stroke-width",2).style("r",2*this.circleRad);var r="Road: ".concat(t["road_name"],"<br>Traffic count: ").concat(t["all_motor_vehicles"]);this.tooltip.style("opacity",1),this.tooltipText.html(r),this.drawPie(a.datum())}},{key:"drawPie",value:function(t){var e=this,i={};Object.keys(this.getTabNames(!1)).map(function(n){i[n]=t[e.tabNames[n]]}),this.dots.draw(i)}},{key:"onMouseOut",value:function(t,e,i){u["l"](i[e]).style("stroke","none").style("r",this.circleRad),this.tooltip.style("opacity",.7);var n="";u["l"](i[e]).each(function(t){return n=t["road_name"]}),u["m"](i).filter(function(t){return t["road_name"]===n}).style("stroke","none").style("r",this.circleRad)}},{key:"setColourScale",value:function(t){this.colourScale=u["j"](u["d"]).domain([u["e"](this.data,function(e){return+e[t]}),u["f"](this.data,function(e){return+e[t]})])}},{key:"tabPressed",value:function(t,e,i){var n=this;this.setColourScale(this.tabNames[t]),u["m"](i).classed("active",function(t,i){return e===i}),this.circles.transition().attr("fill",function(e){return n.colourScale(e[n.tabNames[t]])})}}]),t}(),f=d;i("bd48");var p={name:"RoadTraffic",props:{title:String},mounted:function(){u["b"]("/aadf.csv").then(function(t){var e=new f({root:u["l"](".viz"),data:t.filter(function(t){return!["U","C"].includes(t["road_name"])})});e.draw()})}},v=p,g=i("2877"),m=Object(g["a"])(v,o,s,!1,null,null,null),b=m.exports,y={name:"app",components:{RoadTraffic:b}},w=y,_=(i("034f"),Object(g["a"])(w,a,r,!1,null,null,null)),k=_.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(k)}}).$mount("#app")},"64a9":function(t,e,i){},bd48:function(t,e,i){}});
//# sourceMappingURL=app.4adbd889.js.map